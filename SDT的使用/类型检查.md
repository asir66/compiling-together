语法制导翻译的一个重要应用：类型检查。同时感觉是语义分析的其中一环；

# 一堆定义
actually，前面扯半天很多很多定义没有屌用，反而是把人绕昏了
## 静态-编译前
- 类型检查：
  编译器编译规则
  我理解类型检查：就是一个动作，指编译器通过设计的规则进行类型检查的这个动作过程。
- 良类型（well typed）：
  这个程序通过了类型检查我们就说这个程序是一个良类型的程序。
- 类型可靠：
  类型可靠是用来表述一个语言的，指的是这个语言得到的所有良类型的程序都是良行为的。
  类型可靠的语言是安全语言。（总之就是说这个语言很屌。只要符合通过他的编译器类型检查就不会报错）

针对编译器，看编译器反应
## 动态-运行时
- 执行错误：
  程序运行时出现的错误，人话，程序运行出错
	- trapped error：执行程序立刻奔溃的行为
	- untrapped error：不会直接导致程序奔溃的行为
- 良行为：
  程序运行不可能引起trapped error，就称程序是良行为的
- 安全语言：
  用这个语言写的任何合法程序都是良行为的
  简言之，这个语言设计很屌，能过语言规范就没有trapped error

针对计算机实时操作
所谓静态和动态也只是审查官是编译器还是计算机的区别

前面哇哇哇的讲那么多，其实就是想告诉我们：
有一个类型系统
系统由一组定型规则构成
规则能给语言指定类型

编译器用这个系统进行类型检查。
检查过了程序类型正确，没过类型错误。

简直飞花，啊米诺斯

# 类型表达式：重点

类型分类：
- 基本类型
	- integer
	- real（不是布尔，而是指实数，也就是小数）
	- boolean（竟然是java写法）
	- ...
	- void
	- type_error
- 构造类型（通过基本类型构造的）
	- array：数组
	  组合规则为：$array(num,T)$
	  表示有num个，类型为T
	- pointer：指针
	  组合规则：$pointer(T)$
	  类型为T的指针
	- $\times$：笛卡尔积
	  笛卡尔积表示的是一种组合，所以常用来表示函数的参数组合
	- ->：函数构造符
	  注意箭头前后关系，前面是参数，后面是返回值。
	  表示由前面的推出后面的返回值
	  举一个例子：int func(int a, bool b) == integer x boolen -> integer
	- record：记录构造符
	  通常用在typedef和struct里
	  类型表达式是里面最独特的，因为其他的并不在意标识符的名称，而类型表达式对类型名称需要 name:type
	  写作：record(N : T...)

# 数学符号描述类型系统

简言之，类型系统类数理逻辑。包括：
- 断言：
	- 环境断言
	- 语法断言
	- 定型断言
- 定型规则：
- 类型推断：

![[Pasted image 20250602210806.png]]
前面哪个东东是大写伽玛：$\Gamma$
简而言之，断言即命题

![[Pasted image 20250602211052.png]]
1. 良形：表示当前这个环境$\Gamma$中没有错误、没有矛盾
   简言之，这是一个正确的环境
2. 语法断言，及表示用前面的环境推出后面这个语法的这个命题
   我的确是不太懂语法断言的意义 #搞不懂
   以及这里的Nat到底是个什么勾吧
   据说是Natural Number Type自然数
3. 定型断言：其重要性就在于这章是类型检查

## 演绎推理

规则：
![[Pasted image 20250602211819.png]]
有效与无效区别是什么？ #搞不懂
> 初感觉，就是真假命题

简言之，在前提佐证下推理一个命题是真假命题

如此这般，规定了简单的规则，就构成了一个推理系统。just like 数理逻辑

而在编译的过程会有三种动作：
1. 类型检查
2. 类型推导
3. 类型错误

# 类型检查
本章难点（maybe

人话理解ppt，第五章第二个ppt。
说人话就是，ppt给了我们一个实现类型系统的步骤，给了一个例子，然后教我们实现从语言到代码的过程，也就是
```cpp
if (横线上面的){
	横线下面的
} else {
	为类型错误
}
```
![[Pasted image 20250602213050.png]]

## 类型表达式等价
1. 结构等价
2. 名字等价

总结：
仅有链表为代表的结构体为名字等价，其他为结构等价。

因为结构等价要解构，直至为基本类型。但是链表为代表的结构体是递归定义的。所以四递归。

# 本章重点：
![[Pasted image 20250602213334.png]]