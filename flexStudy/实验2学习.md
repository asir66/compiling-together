通过几个程序比较

基本框架
```cpp
%{
#include<stdio.h>
#define STRING 2
%}

// 关键在于这里我对string的赋值
string 	

%%
{string}    { return STRING; }  // 匹配单个反斜杠
.|\n     { return yytext[0]; }  // 匹配其他字符
%%

int yywrap() { return 1; }

int main() {
    int c;
    printf("程序已启动，输入内容后按 Ctrl+D 结束:\n");
    while((c = yylex())) {
        printf("yylex() 返回值: %d\n", c);
        switch(c) {
            case STRING:
                printf("匹配到反斜杠: %s\n", yytext); break;
            default:
                printf("未匹配到规则，字符: %c (ASCII=%d)\n", c, c); break;
        }
    }
    return 0;
}
```

关键在于string 的复制情况：
放在上面和放在下面，加引号与不加引号

加引号

`string "\."`
![[Pasted image 20250410163735.png]]

`string \.`


`string \\.`
![[Pasted image 20250410164017.png]]

`string "\\."`
![[Pasted image 20250410164101.png]]

`string "\\\\."`

匹配
![[Pasted image 20250410165359.png]]

所以初步判断
加引号会准确匹配，为了避免引号冲突，可以使用\转义，同时转义字符之间也可以转义。但是对于其他正则的字符是不可以使用的。如果要使用正则字符的话就直接写正则表达式。不要写c语言字符串。他仅仅用来准确表示


注释的几种写法：

`/\/\*[\s\S]*?\*\/|\/\/[^\n]*`

`\/\*(\*(?!\/)|[^*])*\*\/`

```

"//"[^\n]*   
"/\*"([^*]|\*+[^*/])*\*+"/"
```


```

/\*

```
终于找到一个可能正确的了
​在 Flex 的规则部分，双引号用于定义字符串常量，即精确匹配特定的字符序列。​当模式被双引号括起来时，Flex 会将引号内的内容视为普通字符序列，逐字匹配输入文本中的相同内容。​这种方式常用于匹配特定的字符串，如关键字、运算符等。


真的可行的
```
"/\*"([^*]|\*+[^*/])*\*+"/"	{ return STRING; }
```


`"/*([^*]|\*+[^*/])*\*+/"	{ return STRING; }`
这个匹配到
![[Pasted image 20250410183037.png]]


由此我猜测flex为了应对注释和正则表达式子之间的变换，所以他规定
/不能直接写，要用引号引起来

并且"本身就是c语言的字符串的含义，所以这里发生了冲突，于是规定

字面量串


# lab1
识别字符串
这里的规则不要想的那么复杂，就是一个识别一个字符串。那么一个字符串就应该是
`"中间不管是什么鬼，只要不是"就好了"`

这里的复杂的地方在于遇到"怎么办？如果是\"就是合理的，但是如果这个\之前就被转义了肿么办呢？

所以关键在于\的处理，同时我们注意到\后面一定要跟一个东西。抓住这里就ok
1. 不能遇到以下字符串`'"\\n`。
2. 如果遇到`\`后面一定要跟东西，不能是换行，就用元字符`.`

\"
这里用状态很难搞，难搞的原因在于首先基于状态的情况我们是通过str_buffer来存储字符的，结束状态之后这个状态机器好像就没有办法走回去了。导致无法去识别他是不是id。结束

所以这里最好的解决方案就是用正则式子

# lab2
```
ws	[ \n\t]

%%

{ws}*				{ printf(" "); }
```


# lab3
